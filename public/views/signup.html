<div ng-if="$root.authUser == null" class="col-lg-6 col-lg-offset-3">
  <h2>Register</h2>
  <div ng-if="loginError.length &gt; 0" class="alert alert-danger">{{loginError}}</div>
  <form ng-submit="signup()" name="form" role="form">
    <div class="form-group" ng-class="{ 'has-error': (form.username.$dirty && form.username.$error.required) || form.username.$error.minlength || form.username.$error.maxlength || form.username.$error.pattern}">
      <label for="username">Username:</label>
      <input ng-minlength="3" ng-maxlength="8" required name="username" type="text" ng-trim="false" ng-pattern="/^[a-zA-Z0-9]*$/" placeholder="Username" ng-model="user.username" class="form-control"/>
      <span ng-show="form.username.$dirty && form.username.$error.required" class="help-block">Username is required.</span>
      <span ng-show="form.username.$error.pattern" class="help-block">Invalid characters.</span>
      <span ng-show="form.username.$error.minlength" class="help-block">Username is too short.</span>
      <span ng-show="form.username.$error.maxlength" class="help-block">Username is too long.</span>
    </div>
    <div class="form-group" ng-class="{ 'has-error': form.password.$dirty && form.password.$error.required }">
      <label for="password">Password:</label>
      <input required name="password" type="password" placeholder="Password" ng-model="user.password" class="form-control"/>
      <span ng-show="form.password.$dirty && form.password.$error.required" class="help-block">Password is required.</span>
    </div>
    <div class="form-group" ng-class="{ 'has-error': (form.repassword.$dirty && form.repassword.$error.required) || form.repassword.$error.compareTo}">
      <label for="repassword">Retype Password:</label>
      <input required name="repassword" type="password" placeholder="Retype Password" ng-model="user.repassword" compare-to="user.password" class="form-control"/>
      <span ng-show="form.repassword.$dirty && form.repassword.$error.required" class="help-block">Password is required.</span>
      <span ng-if="!form.repassword.$error.required" ng-show="form.repassword.$error.compareTo" class="help-block">Passwords do not match!</span>
    </div>
    <div class="form-group" ng-class="{ 'has-error': (form.email.$dirty && form.email.$error.required) || form.email.$error.email}">
      <label for="email">Email:</label>
      <input required="required" name="email" type="email" placeholder="Email" ng-model="user.email" class="form-control"/>
      <span ng-show="form.email.$dirty && form.email.$error.required" class="help-block">Email is required.</span>
      <span ng-show="form.email.$error.email" class="help-block">Email is not valid.</span>
    </div> 
    <div class="form-actions">
      <button type="submit" class="btn btn-primary" ng-disabled="form.$invalid || dataLoading">Sign Up</button>
      <img ng-if="dataLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
      <a href="/login" class="btn btn-link">Cancel</a>
    </div>
  </form>
</div>
<div ng-if="$root.authUser != null" class="col-lg-6 col-lg-offset-3">
  <p>You are logged in as {{$root.authUser.name}}</p>
  <a href="" ng-click="logout()">Logout <span class="fa fa-sign-out"></span></a>
</div>